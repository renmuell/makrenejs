{"version":3,"sources":["makrene.js"],"names":["e","exports","module","define","amd","f","window","global","self","Makrene","t","n","r","s","o","u","a","require","i","Error","call","length","1","_dereq_","version","Vertex","Makrene_Vertex","data","vertex","Object","create","prototype","assign","edges","faces","neighbours","isVertex","value","Edge","Makrene_Edge","edge","vertices","isEdge","Face","Makrene_Face","face","isFace","Graph","Makrene_Graph","graph","addVertex","v","push","addEdge","addFace","forEach","fn","isGraph","2","Circle","Grid","Ki","Search","Visualizer","CircleFullscreen","../vendorJs/polyfill","./base/makrene.base","./graph/makrene.graph.circle","./graph/makrene.graph.grid","./ki/makrene.ki.circle","./search/makrene.search","./visualizer/makrene.visualizer","./visualizer/makrene.visualizer.circle","./visualizer/makrene.visualizer.circleFullscreen","./visualizer/makrene.visualizer.grid","3","linkWithLevelBelowVertexes","levelIndex","vertexLevelIndex","lastLevelVertexes","index1","index2","createEdge","createFace","linkWithLevelAboveVertexes","aboveLeveVertexes","numVertexOnLevel","linkWithNeighbourVertex","neigbour","filter","includes","v1","v2","id","linkEdgeWithVertexEdges","v3","level","Math","max","linkFaceWithVertexFaces","first","calculateVertexDegree","levelPos","levelDegreeOffset","Makrene_Circle","config","_numCircleLevels","_circleLength","numCircleLevels","get","isEmpty","undefined","center","last","arguments","addVertexAt","pop","removeVertex","shift","indexZeroVertieces","j","index","degree","k","unshift","indexLastVertieces","expandFromOudside","num","fill","start","end","min","expandFromInside","collapseFromOudside","deletedLevel","collapseFromInside","clear","vertexAt","pos","facesAt","getFacesLevelArray","indexOf","i2","removeVertexFrom","neighbour","splice","res","map","toString","../base/makrene.base","4","Dir","Top","Right","Bottom","Left","TopLeft","TopRight","BottomRight","BottomLeft","rows","cols","init","createVertexes","linkVertexes","createEdges","linkEdges","createFaces","linkFaces","c","row","col","v4","5","ki","circle","Orginaldegree","OrginalLevel","step","a1","a2","angle","abs","angle2","l1","l2","6","DephFirstSearch","distance","visited","newVisited","pushArray","visit","BreadthFirstSearch","nextvertices","BreadthFirstSearchIterate","lastVisit","Number","MAX_VALUE","Date","now","visitedAll","next","7","base","context","offsetX","width","vertexWidth","offsetY","height","vertexHeight","cos","levelOffset","sin","./makrene.visualizer","8","edgeOfView","rect","deg","twoPI","PI","theta","region","rectAtan","atan2","tanTheta","tan","edgePoint","x","y","xFactor","yFactor","9","offset","margin","10","drawText","content","color","lineHeight","measureText","padding","fillStyle","fillRect","strokeStyle","fillText","getPosX","getPosY","lineColor","vertexColor","lineWidth","drawFaces","drawEdges","drawVertices","drawFacesDebugText","drawEdgesDebugText","drawVertexDebugText","random","beginPath","moveTo","lineTo","stroke","centerX","centerY","11","target","TypeError","output","source","nextKey","hasOwnProperty","Array","searchElement","O","this","len","parseInt","currentElement"],"mappings":"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","file":"makrene-min.js","sourcesContent":["!function(e){if(\"object\"==typeof exports)module.exports=e();else if(\"function\"==typeof define&&define.amd)define(e);else{var f;\"undefined\"!=typeof window?f=window:\"undefined\"!=typeof global?f=global:\"undefined\"!=typeof self&&(f=self),f.Makrene=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error(\"Cannot find module '\"+o+\"'\")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n/*global module */\n\n/**\n *  Core components of graph library.\n */\nvar Makrene = {\n\n  /**\n   *  Current Version of library\n   *  @public\n   *  @type {string}\n   */\n  version : '0.1.0',\n\n  /**\n   *  The factory Vertex(), create an new vertex object.\n   * \n   *  A vertex is a fundamental element of a graph. It represent an node which can hold data and\n   *  can be linked to create a graph.\n   *\n   *  Syntax:\n   *  var vertex = Makrene.Vertex();\n   *\n   *  @public\n   *  @param {object} data - The data of the vertex\n   *  @return {Makrene.Vertex} - New vertex object\n   */\n  Vertex: function Makrene_Vertex (data) {\n\n    var vertex = Object.create(Makrene_Vertex.prototype, {});\n\n    return Object.assign(vertex, {\n      edges      : [],\n      faces      : [],\n      neighbours : [],\n      data       : data || {}\n    });\n  },\n\n  /**\n   *  The isVertex() method determines whether the passed value is an Vertex object.\n   *\n   *  Syntax:\n   *  Makrene.isVertex(value);\n   *  \n   *  @param {object} value - The value to be checked.\n   *  @return {bool} - true if the value is an Vertex; otherwise, false.\n   */\n  isVertex: function (value){\n    if (typeof value === 'undefined') { return false; }\n    return value instanceof Makrene.Vertex;\n  },\n\n  /**\n   *  The factory Edge(), create an new edge object.\n   * \n   *  A edge represents a connection of two vertices.\n   *\n   *  Syntax:\n   *  var edge = Makrene.Edge();\n   *\n   *  @public\n   *  @param {object} data - The data of the edge\n   *  @return {Makrene.Edge} - New edge object\n   */\n  Edge: function Makrene_Edge(data){\n\n    var edge = Object.create(Makrene_Edge.prototype, {});\n\n    return Object.assign(edge, {\n      vertices   : [],\n      faces      : [],\n      neighbours : [],\n      data       : data || {}\n    });\n  },\n\n  /**\n   *  The isEdge() method determines whether the passed value is an Edge object.\n   *\n   *  Syntax:\n   *  Makrene.isEdge(value);\n   *  \n   *  @param {object} value - The value to be checked.\n   *  @return {bool} - true if the value is an Edge; otherwise, false.\n   */\n  isEdge: function (value){\n    if (typeof value === 'undefined') { return false; }\n    return value instanceof Makrene.Edge;\n  },\n\n  /**\n   *  The factory Face(), create an new Face object.\n   * \n   *  A face represents a area between closed connected edges. Also known as polygon.\n   *\n   *  Syntax:\n   *  var face = Makrene.Face();\n   *\n   *  @public\n   *  @param {object} data - The data of the face\n   *  @return {Makrene.Face} - New face object\n   */\n  Face: function Makrene_Face(data){\n\n    var face = Object.create(Makrene_Face.prototype, {});\n\n    return Object.assign(face, {\n      vertices   : [],\n      edges      : [],\n      neighbours : [],\n      data       : data || {}\n    });\n  },\n\n  /**\n   *  The isFace() method determines whether the passed value is an Face object.\n   *\n   *  Syntax:\n   *  Makrene.isFace(value);\n   *  \n   *  @param {object} value - The value to be checked.\n   *  @return {bool} - true if the value is an Face; otherwise, false.\n   */\n  isFace: function (value){\n    if (typeof value === 'undefined') { return false; }\n    return value instanceof Makrene.Face;\n  },\n\n  /**\n   *  The factory Graph(), create an new Graph object.\n   * \n   *  A graph is a set of connected vertices, edges and faces.\n   *\n   *  Syntax:\n   *  var face = Makrene.Graph();\n   *\n   *  @public\n   *  @param {object} data - The data of the graph\n   *  @return {Makrene.Graph} - New graph object\n   */\n  Graph: function Makrene_Graph(data){\n\n    var graph = Object.create(Makrene_Graph.prototype, {});\n\n    return Object.assign(graph, {\n\n      vertices   : [],\n      edges      : [],\n      faces      : [],\n      neighbours : [],\n      data       : data || {},\n\n      addVertex : function(v) { graph.vertices.push(v); return graph; },\n      addEdge   : function(e) { graph.edges.push(e);    return graph; },\n      addFace   : function(f) { graph.faces.push(f);    return graph; },\n\n      forEach   : function(fn){ graph.vertices.forEach(fn); }\n    });\n  },\n\n  /**\n   *  The isGraph() method determines whether the passed value is an Graph object.\n   *\n   *  Syntax:\n   *  Makrene.isGraph(value);\n   *  \n   *  @param {object} value - The value to be checked.\n   *  @return {bool} - true if the value is an Graph; otherwise, false.\n   */\n  isGraph: function (value){\n    if (typeof value === 'undefined') { return false; }\n    return value instanceof Makrene.Graph;\n  }\n\n};\n\nmodule.exports = Makrene;\n\n},{}],2:[function(_dereq_,module,exports){\n/*global require, module */\n\n_dereq_('../vendorJs/polyfill')\n\n/**\n *  Combines all Makrene components into on usable namespace object.\n */\nmodule.exports = Object.assign(_dereq_('./base/makrene.base'), {\n  Circle : _dereq_('./graph/makrene.graph.circle'),\n  Grid   : _dereq_('./graph/makrene.graph.grid'),\n  Ki     : { Circle : _dereq_('./ki/makrene.ki.circle') },\n  Search : _dereq_('./search/makrene.search'),\n  Visualizer : Object.assign(_dereq_('./visualizer/makrene.visualizer'), {\n    Grid   : _dereq_('./visualizer/makrene.visualizer.grid'),\n    Circle : _dereq_('./visualizer/makrene.visualizer.circle'),\n    CircleFullscreen : _dereq_('./visualizer/makrene.visualizer.circleFullscreen')\n  })\n});\n\n},{\"../vendorJs/polyfill\":11,\"./base/makrene.base\":1,\"./graph/makrene.graph.circle\":3,\"./graph/makrene.graph.grid\":4,\"./ki/makrene.ki.circle\":5,\"./search/makrene.search\":6,\"./visualizer/makrene.visualizer\":10,\"./visualizer/makrene.visualizer.circle\":7,\"./visualizer/makrene.visualizer.circleFullscreen\":8,\"./visualizer/makrene.visualizer.grid\":9}],3:[function(_dereq_,module,exports){\n(function() {\n\n/*global require, module */\n\nvar Makrene = _dereq_('../base/makrene.base')\n\n/**\n *  Multi linked circle mesh.\n *\n *     -----B-----\n *    /    / \\    \\\n *   A----5---6----C\n *   | \\ / \\ / \\ / |\n *   |  4---1---7  |\n *   | / \\ / \\ / \\ |  Circle with numVertexOnLevel = 6\n *   9----3---2----D         and  length = 13\n *    \\    \\ /    /\n *     -----8-----\n *\n *  The circle contains multiple levels/rings, each with a \n *  max number of vertices. The center contains one vertex, connected\n *  with each of the first level/ring. Each level vertex is connected\n *  with their visual neighbour and two vertices of the lower and \n *  higher level/ring (because each level/ring is offset by half \n *  the distance of each vertex, which puts every vertex in the \n *  middle of the vertices below and above). \n *\n *  Behaves like a sequence. The first element is the center of \n *  the circle and it grows outside, by which the last element \n *  is the vertex with the highest degree/angle on the outer \n *  level/ring.\n *  \n *  Syntax:\n *  \n *  let circle = Makrene.Circle();\n *\n *  @public\n *  @implements {Makrene.Graph}\n *  @param {object} config - the Settigns\n *  @param {number} config.numVertexOnLevel - @see graph.numVertexOnLevel\n *  @returns {Makrene.Circle} Circle\n */\nmodule.exports = function Makrene_Circle(config) {\n\n  /***\n   *       _____             __ _       \n   *      / ____|           / _(_)      \n   *     | |     ___  _ __ | |_ _  __ _ \n   *     | |    / _ \\| '_ \\|  _| |/ _` |\n   *     | |___| (_) | | | | | | | (_| |\n   *      \\_____\\___/|_| |_|_| |_|\\__, |\n   *                               __/ |\n   *                              |___/ \n   */\n\n  config = Object.assign({\n\n   /**\n    *  default setting for numVertexOnLevel\n    *  @see graph.numVertexOnLevel\n    */\n    numVertexOnLevel: 8\n\n  }, config);\n\n  /***\n   *      ______ _      _     _     \n   *     |  ____(_)    | |   | |    \n   *     | |__   _  ___| | __| |___ \n   *     |  __| | |/ _ \\ |/ _` / __|\n   *     | |    | |  __/ | (_| \\__ \\\n   *     |_|    |_|\\___|_|\\__,_|___/\n   *                                \n   *                                \n   */\n\n   /**\n    *  @private\n    *  @see graph.numCircleLevels\n    */\n   var _numCircleLevels = 0;\n   \n   /**\n    *  @private\n    *  @see graph.length\n    */\n   var _circleLength = 0;\n\n  /***\n   *      _____                           _   _           \n   *     |  __ \\                         | | (_)          \n   *     | |__) | __ ___  _ __   ___ _ __| |_ _  ___  ___ \n   *     |  ___/ '__/ _ \\| '_ \\ / _ \\ '__| __| |/ _ \\/ __|\n   *     | |   | | | (_) | |_) |  __/ |  | |_| |  __/\\__ \\\n   *     |_|   |_|  \\___/| .__/ \\___|_|   \\__|_|\\___||___/\n   *                     | |                              \n   *                     |_|                              \n   */\n  var graph = Object.create(Makrene_Circle.prototype, {\n\n    /**\n     *  Gets the number of max vertex count per level/ring.\n     *\n     *  @public\n     *  @default 8\n     *  @type {number}\n     */\n    numVertexOnLevel: {\n      value: config.numVertexOnLevel\n    },\n\n    /**\n     *  Gets the number of circle levels/rings.\n     *\n     *  @public\n     *  @type {number}\n     */\n    numCircleLevels: {\n      get: function(){\n        return _numCircleLevels;\n      }\n    },\n\n    /**\n     *  The number of vertices in the circle/graph.\n     *\n     *  @public\n     *  @type {number}\n     */\n    length  : {\n      get: function(){\n        return _circleLength;\n      }\n    },\n\n    /**\n     *  Is circle empty.\n     *\n     *  @public\n     *  @type {bool}\n     */\n    isEmpty : {\n      get: function(){\n        return graph.vertices.length === 0;\n      }\n    },\n\n    /**\n     *  First Element of circle/graph, which is the center of the circle.\n     *\n     *  @public\n     *  @type {Makrene.Vertex}\n     */\n    first: {\n      get: function(){\n        return graph.vertices[0] ? graph.vertices[0][0] : undefined;\n      }\n    },\n\n    /**\n     *  Visual center element of circle/graph. Same as first().\n     *\n     *  @public\n     *  @alias graph.first\n     *  @type {Makrene.Vertex}\n     */\n    center: {\n      get: function(){\n        return graph.first;\n      }\n    },\n\n    /**\n     *  Last element of circle/graph, which is the vertex with the \n     *  highest degree/angle on the outer level/ring.\n     *\n     *  @public\n     *  @type {Makrene.Vertex}\n     */\n    last: {\n      get: function(){\n        return graph.isEmpty \n          ? undefined \n          : graph.length === 1 \n            ? graph.center \n            : graph.vertices[_numCircleLevels][graph.vertices[_numCircleLevels].length - 1];\n      }\n    }\n  });\n\n  /***\n   *      __  __      _   _               _     \n   *     |  \\/  |    | | | |             | |    \n   *     | \\  / | ___| |_| |__   ___   __| |___ \n   *     | |\\/| |/ _ \\ __| '_ \\ / _ \\ / _` / __|\n   *     | |  | |  __/ |_| | | | (_) | (_| \\__ \\\n   *     |_|  |_|\\___|\\__|_| |_|\\___/ \\__,_|___/\n   *                                                                                     \n   */\n  return Object.assign(graph, Makrene.Graph(), {\n\n    /**\n     *  The push() method adds one or more elements to the end of \n     *  an Circle and returns the new length of the Circle.\n     *\n     *  Syntax:\n     *  let newCircleLength = circle.push(vertex1[, ...[, vertexN]])\n     *\n     *  @public\n     *  @param {...Makrene.Vertex|object} v - The elements to add to the end of the Circle.\n     *                                        New vertex or data for new vertex.\n     *  @return {number} - Length after push of vertex\n     */\n    push: function () {\n\n      [].forEach.call(arguments, function (v) {\n\n        if (typeof v === 'undefined' || !(v instanceof Makrene.Vertex)) {\n          v = Makrene.Vertex(v || {});\n        }\n\n        if (!graph.isEmpty \n         && (_numCircleLevels == 0 || graph.vertices[_numCircleLevels].length === graph.numVertexOnLevel)) {\n\n          _numCircleLevels++;\n        }\n\n        graph.vertices[_numCircleLevels] = graph.vertices[_numCircleLevels] || [];\n\n        graph.addVertexAt(_numCircleLevels, graph.vertices[_numCircleLevels].length, v);  \n\n      });\n\n      return graph.length;\n    },\n  \n    /**\n     *  The pop() method removes the last element from an Circle and returns that element. \n     *  This method changes the length of the Circle.\n     *\n     *  Syntax:\n     *  var vertex = circle.pop()\n     *\n     *  @public\n     *  @return {Makrene.Vertex|undefined} - The removed element from the circle; \n     *                                       undefined if the circle is empty.\n     */\n    pop: function(){\n      return graph.removeVertex(graph.last);\n    },\n\n    /**\n     *  The shift() method removes the first element from an Circle and returns that removed element. \n     *  This method changes the length of the Circle.\n     *\n     *  Syntax:\n     *  var vertex = circle.shift()\n     *\n     *  @public\n     *  @return {Makrene.Vertex|undefined} - The removed element from the circle; \n     *                                       undefined if the circle is empty.\n     *\n     *  @remarks Algorithm-idea: fast rotate to center\n     *           - remove middle\n     *           - remove every first element of each level, shift rest one position to front\n     *           - add removed element one level lower on freed last position\n     */\n    shift: function(){\n      if (graph.isEmpty) { return; }\n      if (graph.length === 1) {\n        return graph.pop();\n      } else {\n\n        // remove all level index 0\n        var indexZeroVertieces = [];\n        for (var i = graph.vertices.length - 1; i >= 0; i--) {\n          indexZeroVertieces[i] = graph.vertices[i][0];\n          graph.removeVertex(graph.vertices[i][0]);\n        }\n\n        // shift all levels --> undefined at last max level index\n        for (var j = graph.vertices.length - 1; j >= 0; j--) {\n          graph.vertices[j].shift();\n\n          graph.vertices[j].forEach(function(v, index){\n            if (v){\n              v.data.degree = calculateVertexDegree(graph, j, index);\n              v.data.level  = j;\n              v.id = v.data.level + '_' + v.data.degree;\n            }\n          });\n        }\n        \n        // add all index 0 at the end of level below\n        graph.addVertexAt(0, 0, indexZeroVertieces[1]);\n        for (var k = indexZeroVertieces.length - 1; k >= 2; k--) {\n          graph.addVertexAt(k - 1, graph.numVertexOnLevel - 1, indexZeroVertieces[k]);\n        }\n      \n        return indexZeroVertieces[0];\n      }\n    },\n    \n    /**\n     *  The unshift() method adds one or more elements to the beginning of \n     *  an Circle and returns the new length of the Circle.\n     *\n     *  Syntax:\n     *  let newCircleLength = circle.unshift(vertex1[, ...[, vertexN]])\n     *\n     *  @public\n     *  @param {...Makrene.Vertex|object} v - The elements to add to the beginning of the Circle.\n     *                                        New vertex or data for new vertex.\n     *  @return {number} - Length after push of vertex\n     */\n    unshift: function(){\n\n      [].forEach.call(arguments, function (v) {\n\n        if (typeof v === 'undefined' || !(v instanceof Makrene.Vertex)) {\n          v = Makrene.Vertex(v || {});\n        }\n\n        if (graph.isEmpty) { return graph.push(v); }\n\n        // remove every last index\n        var indexLastVertieces = [graph.center];\n        graph.removeVertex(graph.center);\n        for (var i = graph.vertices.length - 1; i >= 0; i--) {\n          if (graph.vertices[i][graph.numVertexOnLevel-1]){\n            indexLastVertieces[i] = graph.vertices[i][graph.numVertexOnLevel-1];\n            graph.removeVertex(graph.vertices[i][graph.numVertexOnLevel-1]);\n          }\n        }\n\n        // unshift every level -> insert undefined at 0\n        for (var j = graph.vertices.length - 1; j >= 0; j--) {\n          graph.vertices[j].unshift(undefined);\n\n          graph.vertices[j].forEach(function(v, index){\n            if (v){\n              v.data.degree = calculateVertexDegree(graph, j, index);\n              v.data.level  = j;\n              v.id = v.data.level + '_' + v.data.degree;\n            }\n          });\n        }\n\n        // add all last index at beginning of level above\n        for (var k = indexLastVertieces.length - 1; k >= 0; k--) {\n          graph.addVertexAt(k + 1, 0, indexLastVertieces[k]);\n        }\n      \n        // add vertex at 0,0\n        graph.addVertexAt(0, 0, v);\n\n        if (!graph.isEmpty \n         && (_numCircleLevels == 0 || graph.vertices[_numCircleLevels].length === graph.numVertexOnLevel)) {\n\n          _numCircleLevels++;\n        }\n\n      });\n\n      return graph.length;\n    },\n\n    expandFromOudside: function(num){\n      num = num || graph.numVertexOnLevel;\n\n      for(;num>0;num--){ \n        graph.push(Makrene.Vertex());\n      }\n\n      return graph.length;\n    },\n\n    fill: function (value, start, end) {\n\n      start = start < 0 ?\n        Math.max(graph.length + start, 0) :\n        Math.min(start, graph.length);\n\n      end = end || graph.length;\n\n      end = end < 0 ?\n        Math.max(graph.length + end, 0) :\n        Math.min(end, graph.length);\n\n      while (start < end) {\n        graph.addVertexAt()\n        start++;\n      }\n\n      return graph;\n    },\n\n    expandFromInside: function(num){\n      num = num || graph.numVertexOnLevel;\n\n      for(;num>0;num--){ \n        graph.unshift(Makrene.Vertex());\n      }\n\n      return graph.length;\n    },\n\n    collapseFromOudside: function(num){\n      var deletedLevel = [];\n\n      num = num || graph.numVertexOnLevel;\n\n      for(;num>0;num--){ \n        deletedLevel.push(graph.pop());\n      }\n\n      return deletedLevel;\n    },\n\n    collapseFromInside: function(num){\n      var deletedLevel = [];\n\n      num = num || graph.numVertexOnLevel;\n\n      for(;num>0;num--){ \n        deletedLevel.push(graph.shift());\n      }\n\n      return deletedLevel;\n    },\n\n    clear: function(){\n      _numCircleLevels = 0;\n      _circleLength    = 0;\n      graph.faces       = [];\n      graph.edges       = [];\n      graph.vertices    = [];\n      graph.neighbours  = [];\n      graph.data  = {};\n    },\n\n    includes: function(vertex){\n      return graph.filter(function(v){ return v === vertex; }).length > 0;\n    },\n\n    vertexAt: function(level, pos){\n      return graph.vertices[level] ? graph.vertices[level][pos] : undefined;\n    },\n\n    facesAt: function(level){\n      return graph.faces.filter(function(f){ return f.data.level == level; });\n    },\n\n    getFacesLevelArray: function(){\n      var r = [];\n      graph.faces.forEach(function(f){ \n        \n        if (typeof r[f.data.level] === 'undefined') {\n          r[f.data.level] = []; \n        }\n\n        r[f.data.level].push(f); \n      });\n\n      return r;\n    },\n\n    indexOf: function(vertex){\n      var index = 0;\n      \n      for (var i = graph.vertices.length - 1, i2 = 0; i >= 0; i--, i2++) {\n        var levelIndex = graph.vertices[i2].indexOf(vertex);\n        if (levelIndex >= 0){\n          return index + levelIndex;\n        } else {\n          index += graph.vertices[i2].length;\n        }\n      }\n\n      return -1;\n    },\n\n    addVertexAt: function(level, pos, v){\n\n      if (graph.numVertexOnLevel == 0){ return; }\n      if (graph.numVertexOnLevel < pos){ return; }\n      if (graph.level == 0 && pos !== 0) { return; }\n\n      graph.vertices[level] = graph.vertices[level] || [];\n\n      if (typeof v === 'undefined') {\n        graph.vertices[level][pos] = undefined;\n        return;\n      }\n\n      v.data.degree = calculateVertexDegree(graph, level, pos);\n      v.data.level  = level;\n      v.id = v.data.level + '_' + v.data.degree;\n      graph.vertices[level][pos] = v;\n\n      //Link center with everyone above\n      if (level === 0) {\n        if (graph.vertices[1]) {\n          graph.vertices[1].forEach(function(vertex, index){\n            graph.removeVertex(vertex);\n            graph.addVertexAt(1, index, vertex);\n          });\n        }\n      } else {\n        //linking with level below\n        linkWithLevelBelowVertexes(graph, level, pos);\n\n        //linking with level above\n        linkWithLevelAboveVertexes(graph, level, pos);\n\n        //link with previous neighbour\n        linkWithNeighbourVertex(\n          graph, \n          v, \n          graph.vertices[level][(pos - 1 + graph.numVertexOnLevel) % graph.numVertexOnLevel]);\n\n        //link with next neigour \n        linkWithNeighbourVertex(\n          graph, \n          v, \n          graph.vertices[level][(pos + 1 + graph.numVertexOnLevel) % graph.numVertexOnLevel]); \n      }  \n\n      _circleLength++;    \n    },\n\n    removeVertexFrom: function(level, pos){\n      return graph.removeVertex(graph.vertexAt(level, pos));\n    },\n\n    removeVertex: function(vertex) {\n      if (vertex){\n        // remove neighbour\n        vertex.neighbours.forEach(function(neighbour){\n          neighbour.neighbours.splice(neighbour.neighbours.indexOf(vertex), 1);\n        });\n        \n        // remove edges\n        vertex.edges.forEach(function(edge){\n          edge.neighbours.forEach(function(neighbour){\n            neighbour.neighbours.splice(neighbour.neighbours.indexOf(edge), 1);\n          });\n\n          edge.vertices.forEach(function(v){\n            if (v != vertex) {\n              v.edges.splice(v.edges.indexOf(edge), 1);\n            }\n          });\n\n          edge.faces.forEach(function(face){\n            face.edges.splice(face.edges.indexOf(edge), 1);\n          });\n\n          \n          graph.edges.splice(graph.edges.indexOf(edge), 1);\n        });\n\n        // remove faces\n        vertex.faces.forEach(function(face){\n          face.neighbours.forEach(function(neighbour){\n            neighbour.neighbours.splice(neighbour.neighbours.indexOf(face), 1);\n          });\n\n          face.vertices.forEach(function(v){\n            if (v != vertex) {\n              v.faces.splice(v.faces.indexOf(face), 1);\n            }\n          });\n\n          face.edges.forEach(function(edge){\n            edge.faces.splice(edge.faces.indexOf(face), 1);\n          });\n\n          graph.faces.splice(graph.faces.indexOf(face), 1);\n        });\n\n        // remove vertex\n        graph.vertices.forEach(function(level, index){\n          if (level.includes(vertex)){\n            \n            if (level.indexOf(vertex) == level.length - 1){\n              level.length = level.length - 1;\n            } else {\n              delete level[level.indexOf(vertex)];\n            }\n\n            if (_numCircleLevels == index && level.length === 0) {\n              if (graph.numCircleLevels === 0) {\n                graph.vertices = [];\n              } else {\n                _numCircleLevels--;\n                graph.vertices.splice(graph.vertices.indexOf(level), 1);\n              }\n            }\n          }\n        });\n\n        vertex.edges = [];\n        vertex.faces = [];\n        vertex.neighbours = [];\n\n        _circleLength--;\n\n        return vertex;\n      }\n    },\n\n    forEach: function(fn){\n      graph.vertices.forEach(function(level){ \n        level.forEach(fn); \n      });\n    },\n\n    filter: function(fn){\n      var res = [];\n\n      graph.forEach(function(v){\n        if (fn(v)){\n          res.push(v);\n        }\n      });\n\n      return res;\n    },\n\n    map: function(fn){\n      var res = [];\n\n      graph.forEach(function(v){\n        res.push(fn(v));\n      });\n\n      return res;\n    },\n\n    toString: function(){\n      return 'Makrene.Circle \\n' + \n             '\\tLength: ' + graph.length + '\\n' +\n             '\\tEdges: ' + graph.edges.length + '\\n' +\n             '\\tFaces: ' + graph.faces.length;\n    }\n  });\n};\n\n/***\n *      _____      _            _            \n *     |  __ \\    (_)          | |           \n *     | |__) | __ ___   ____ _| |_ ___  ___ \n *     |  ___/ '__| \\ \\ / / _` | __/ _ \\/ __|\n *     | |   | |  | |\\ V / (_| | ||  __/\\__ \\\n *     |_|   |_|  |_| \\_/ \\__,_|\\__\\___||___/\n *                                                                                    \n */\n\nfunction linkWithLevelBelowVertexes(graph, levelIndex, vertexLevelIndex){\n  var lastLevelVertexes = graph.vertices[levelIndex - 1];\n\n  if (lastLevelVertexes) {\n    var v = graph.vertices[levelIndex][vertexLevelIndex];\n    var index1 = (lastLevelVertexes.length - 1) < vertexLevelIndex     ? 0 : vertexLevelIndex;\n    var index2 = (lastLevelVertexes.length - 1) < vertexLevelIndex + 1 ? 0 : vertexLevelIndex + 1;\n\n    if (lastLevelVertexes[index1]) {\n      v.neighbours.push(lastLevelVertexes[index1]);\n      lastLevelVertexes[index1].neighbours.push(v);\n    \n      createEdge(graph, v, lastLevelVertexes[index1]); \n    }\n\n    if (index1 != index2 && lastLevelVertexes[index2]) {\n      v.neighbours.push(lastLevelVertexes[index2]);\n      lastLevelVertexes[index2].neighbours.push(v);\n      \n      createEdge(graph, v, lastLevelVertexes[index2]);\n      if (lastLevelVertexes[index1]){\n        createFace(graph, v, lastLevelVertexes[index1], lastLevelVertexes[index2]);\n      }\n    }\n  }\n}\n\nfunction linkWithLevelAboveVertexes(graph, levelIndex, vertexLevelIndex){\n  var aboveLeveVertexes = graph.vertices[levelIndex + 1];\n\n  if (aboveLeveVertexes){\n    var v = graph.vertices[levelIndex][vertexLevelIndex];\n    var index1 = vertexLevelIndex\n    var index2 = vertexLevelIndex - 1 < 0 ? graph.numVertexOnLevel - 1 : vertexLevelIndex - 1;\n\n    if (aboveLeveVertexes[index1]){\n       v.neighbours.push(aboveLeveVertexes[index1]);\n      aboveLeveVertexes[index1].neighbours.push(v);\n    \n      createEdge(graph, v, aboveLeveVertexes[index1]); \n    }\n\n    if (index1 != index2 && aboveLeveVertexes[index2]){\n      v.neighbours.push(aboveLeveVertexes[index2]);\n      aboveLeveVertexes[index2].neighbours.push(v);\n      \n      createEdge(graph, v, aboveLeveVertexes[index2]);\n\n      if (aboveLeveVertexes[index1]){\n        createFace(graph, v, aboveLeveVertexes[index1], aboveLeveVertexes[index2]);\n      }\n    }\n  }\n}\n\nfunction linkWithNeighbourVertex(graph, vertex, neigbour){\n  if (neigbour) {\n    vertex.neighbours.push(neigbour);\n    neigbour.neighbours.push(vertex);\n    createEdge(graph, vertex, neigbour);\n\n    vertex.neighbours\n          .filter(function(n){ \n            if (neigbour != n){\n              return neigbour.neighbours.includes(n); \n            }\n          }).forEach(function(n){\n            createFace(graph, vertex, neigbour, n);\n          })\n  }\n}\n\nfunction createEdge(graph, v1, v2){\n  var edge = Makrene.Edge();\n  edge.vertices.push(v1);\n  edge.vertices.push(v2);\n  edge.id = graph.edges.length;\n  graph.edges.push(edge);\n\n  v2.edges.push(edge);\n  v1.edges.push(edge);\n\n  linkEdgeWithVertexEdges(edge, v1);\n  linkEdgeWithVertexEdges(edge, v2);\n}\n\nfunction linkEdgeWithVertexEdges (edge, vertex){\n  vertex.edges.forEach(function(e){\n    if (edge != e && !edge.neighbours.includes(e)){\n      edge.neighbours.push(e);\n      e.neighbours.push(edge);\n    }\n  });\n}\n\nfunction createFace(graph, v1, v2, v3){\n  var f = Makrene.Face();\n\n  f.vertices.push(v1);\n  f.vertices.push(v2);\n  f.vertices.push(v3);\n\n  v1.faces.push(f);\n  v2.faces.push(f);\n  v3.faces.push(f);\n\n  f.id = graph.faces.length;\n  f.data = {\n    level: Math.max(\n      v1.data.level,\n      v2.data.level,\n      v3.data.level)\n  };\n\n  graph.faces.push(f);\n\n  linkFaceWithVertexFaces(f, v1);\n  linkFaceWithVertexFaces(f, v2);\n  linkFaceWithVertexFaces(f, v3);\n\n  // Link edge with face\n  var edges = [];\n  edges.push(v1.edges.filter(function(e){ return e.vertices.includes(v2); }).first());\n  edges.push(v2.edges.filter(function(e){ return e.vertices.includes(v3); }).first());\n  edges.push(v3.edges.filter(function(e){ return e.vertices.includes(v1); }).first());\n  \n  edges.forEach(function(e){\n    e.faces.push(f);\n    f.edges.push(e);\n  });\n}\n\nfunction linkFaceWithVertexFaces(face, vertex){\n  vertex.faces.forEach(function(f){\n    if (face != f && !face.neighbours.includes(f)){\n      face.neighbours.push(f);\n      f.neighbours.push(face);\n    }\n  });\n}\n\nfunction calculateVertexDegree(graph, level, levelPos) {\n  var levelDegreeOffset =  (360/graph.numVertexOnLevel)/2;\n  return levelDegreeOffset + (levelDegreeOffset * level) + ((360/graph.numVertexOnLevel) * levelPos);\n}\n\n}());\n},{\"../base/makrene.base\":1}],4:[function(_dereq_,module,exports){\n/*global require, module */\n\nvar Makrene = _dereq_('../base/makrene.base');\n\nvar Dir = {\n  Top     : 0,\n  Right   : 1,\n  Bottom  : 2,\n  Left    : 3,\n\n  TopLeft     : 0,\n  TopRight    : 1,\n  BottomRight : 2,\n  BottomLeft  : 3\n};\n\nmodule.exports = function(config){\n  config = config || {};\n\n  var graph = Object.assign(Makrene.Graph(), {\n\n    rows: config.rows || 0,\n    cols: config.cols || 0,\n\n    init: function(){\n      graph.createVertexes();\n      graph.linkVertexes();\n\n      graph.createEdges();\n      graph.linkEdges();\n\n      graph.createFaces();\n      graph.linkFaces();\n    },\n\n    createVertexes: function(){\n      for (var r = graph.rows - 1; r >= 0; r--) {\n        graph.vertices[r] = [];\n        for (var c = graph.cols - 1; c >= 0; c--) {\n          var v = Makrene.Vertex();\n\n          v.data.row = r;\n          v.data.col = c;\n\n          graph.vertices[r][c] = v;\n        }\n      }\n    },\n\n    linkVertexes: function(){\n      graph.forEach(function(vertex, row, col){\n\n        if (col > 0){\n          vertex.neighbours[Dir.Left] = graph.vertices[row][col - 1];\n        }\n\n        if (col < graph.cols -1) {\n          vertex.neighbours[Dir.Right] = graph.vertices[row][col + 1];\n        }\n\n        if (row > 0){\n          vertex.neighbours[Dir.Top] = graph.vertices[row - 1][col];\n        }\n\n        if (row < graph.rows -1){\n          vertex.neighbours[Dir.Bottom] = graph.vertices[row + 1][col];\n        }\n\n      });\n    },\n\n    createEdge: function(v1, v2){\n      var edge = Makrene.Edge();\n      edge.vertices.push(v1);\n      edge.vertices.push(v2);\n\n      graph.edges.push(edge);\n\n      v2.edges.push(edge);\n      v1.edges.push(edge);\n    },\n\n    createEdges: function(){\n      graph.forEach(function(vertex){\n        if (vertex.neighbours[Dir.Left]) {\n          graph.createEdge(vertex, vertex.neighbours[Dir.Left]);\n        }\n\n        if (vertex.neighbours[Dir.Top]) {\n          graph.createEdge(vertex, vertex.neighbours[Dir.Top]);\n        }\n      });\n    },\n\n    linkEdges: function(){\n      graph.edges.forEach(function(edge) {\n        edge.vertices.forEach(function(vertex) {\n          vertex.edges.forEach(function(neighbour){\n            if (edge != neighbour) {\n              edge.neighbours.push(neighbour);\n            }\n          });\n        });\n      });\n    },\n\n    createFace: function(v1, v2, v3, v4){\n      var edges = [];\n\n      v1.edges.forEach(function(edge){\n        if (edge.vertices.includes(v2) || edge.vertices.includes(v3)){\n          edges.push(edge);\n        }\n      });\n\n      v4.edges.forEach(function(edge){\n        if (edge.vertices.includes(v2) || edge.vertices.includes(v3)){\n          edges.push(edge);\n        }\n      });\n\n      var face = Makrene.Face();\n\n      face.vertices[Dir.TopRight]    = v3;\n      face.vertices[Dir.TopLeft]     = v4;\n      face.vertices[Dir.BottomLeft]  = v2;\n      face.vertices[Dir.BottomRight] = v1;\n\n      graph.faces.push(face);\n\n      v1.faces.push(face)\n      v2.faces.push(face)\n      v3.faces.push(face)\n      v4.faces.push(face)\n\n      edges.forEach(function(edge){\n        face.edges.push(edge);\n        edge.faces.push(face);\n      });\n    },\n\n    createFaces: function(){\n      graph.forEach(function(vertex){\n        if (vertex.neighbours[Dir.Left]\n         && vertex.neighbours[Dir.Top]) {\n\n          graph.createFace(\n            vertex,\n            vertex.neighbours[Dir.Left],\n            vertex.neighbours[Dir.Top],\n            vertex.neighbours[Dir.Top]\n                  .neighbours[Dir.Left]);\n        }\n      });\n    },\n\n    linkFaces: function(){\n      graph.faces.forEach(function(face) {\n        face.vertices.forEach(function(vertex) {\n          vertex.faces.forEach(function(neighbour){\n            if (face != neighbour) {\n              face.neighbours.push(neighbour);\n            }\n          });\n        });\n      });\n    },\n\n    forEach: function(fn){\n      for (var r = graph.rows - 1; r >= 0; r--) {\n        for (var c = graph.cols - 1; c >= 0; c--) {\n          fn(graph.vertices[r][c], r, c);\n        }\n      }\n    }\n  })\n\n  graph.init();\n\n  return graph;\n};\n\n},{\"../base/makrene.base\":1}],5:[function(_dereq_,module,exports){\n/*global module */\n\nmodule.exports = function(){\n\n  var ki = {\n    init: function(circle){\n      circle.forEach(function(v){\n        v.data.degree = v.data.degree % 360;\n        v.data.Orginaldegree = v.data.degree;\n        v.data.OrginalLevel= v.data.level;\n      });\n    },\n    step: function(circle){\n      circle.forEach(function(v){\n\n        // goto orginal angle\n        var a1 = v.data.Orginaldegree;\n        var a2 = v.data.degree ;\n        var angle = 180 - Math.abs(Math.abs(a1 - a2) - 180);\n\n        if (Math.abs(angle) >= 1) {\n          var angle2 = 180 - Math.abs(Math.abs((a1+1) - a2) - 180);\n          v.data.degree += angle2 > angle ? 1 : -1;\n          v.data.degree = v.data.degree % 360;\n        }\n\n        // goto orginal level\n        var l1 = v.data.OrginalLevel;\n        var l2 = v.data.level;\n\n        if (Math.abs(l1 - l2) > 0.1) {\n          v.data.level += l1 > l2 ? +0.1 : -0.1;\n        }\n\n      });\n    }\n  };\n\n  return ki;\n};\n\n},{}],6:[function(_dereq_,module,exports){\n/*global module */\n\nvar Search = {\n\n  DephFirstSearch: function(vertex, distance, visited){\n    visited = visited || [];\n    var newVisited = [];\n    newVisited.pushArray(visited);\n    if (!visited.includes(vertex) && distance>0) {\n      newVisited.push(vertex);\n      vertex.visit();\n      vertex.neighbours.forEach(function(neighbour){\n        if (neighbour) {\n          Search.DephFirstSearch(neighbour, distance - 1, newVisited);\n        }\n      });\n    }\n  },\n\n  BreadthFirstSearch: function (vertices, distance, visited) {\n    visited = visited || [];\n\n    if (distance > 0) {\n      var nextvertices = [];\n\n      vertices.forEach(function(vertex){\n        if (vertex) {\n          visited.push(vertex);\n          vertex.visit();\n          for (var i = vertex.neighbours.length - 1; i >= 0; i--) {\n            if (!visited.includes(vertex.neighbours[i])) {\n              nextvertices.push(vertex.neighbours[i]);\n            }\n          }\n        }\n      })\n\n      Search.BreadthFirstSearch(nextvertices, distance - 1, visited);\n    }\n  },\n\n  BreadthFirstSearchIterate: function (circle, vertices, visited) {\n    visited = visited || [];\n\n    if (visited.length === 0) {\n      circle.forEach(function(vertex){\n        vertex.data.visited   = false;\n        vertex.data.lastVisit = Number.MAX_VALUE;\n      });\n    }\n\n    if (vertices.length != 0) {\n      var nextvertices = [];\n\n      vertices.forEach(function(vertex){\n        if (vertex) {\n\n          visited.push(vertex);\n          vertex.data.visited   = true;\n          vertex.data.lastVisit = Date.now();\n\n          vertex.neighbours.forEach(function(neighbour){\n            if (neighbour && !neighbour.data.visited && !nextvertices.includes(neighbour)) {\n              nextvertices.push(neighbour);\n            }\n          })\n        }\n      });\n\n      return {\n        visited      : vertices,\n        visitedAll   : visited,\n        nextvertices : nextvertices,\n\n        next : function () {\n          return Search.BreadthFirstSearchIterate(circle, nextvertices, visited);\n        }\n      };\n    }\n  }\n};\n\nmodule.exports = Search;\n\n},{}],7:[function(_dereq_,module,exports){\n/*global require, module */\n\nvar base = _dereq_('./makrene.visualizer');\n\nmodule.exports = function (context, circle, config) {\n\n  var offsetX = (config.width  - config.vertexWidth ) / 2;\n  var offsetY = (config.height - config.vertexHeight) / 2;\n\n  base(context,\n    circle,\n    config,\n    function(v) {\n      return offsetX + ((Math.cos(v.data.degree * 0.0174532925) * (v.data.level * config.levelOffset)) + config.vertexWidth  / 2);\n    },\n    function(v) {\n      return offsetY + ((Math.sin(v.data.degree * 0.0174532925) * (v.data.level * config.levelOffset)) + config.vertexHeight / 2);\n    });\n};\n\n},{\"./makrene.visualizer\":10}],8:[function(_dereq_,module,exports){\n/*global require, module */\n\nvar base = _dereq_('./makrene.visualizer');\n\n/**\n *  This visualizer draws a Makrene.Circle, from the center of the canvas, to the edges\n *  of the canvas. The outer ring of the circle will be drag out to the edges of the canvas \n *  rectangle. This gives a special effect of filled space. By default each ring, will be\n *  spaced equally to the outer edge. \n *\n *   -------B-------\n *   |     / \\     | \n *   A----5---6----C\n *   | \\ / \\ / \\ / |\n *   |  4---1---7  |\n *   | / \\ / \\ / \\ |  \n *   9----3---2----D\n *   |     \\ /     |\n *   -------8-------\n *\n *  @public\n *  @param {RenderingContext} context   - The canvas 2d rendering context.\n *  @param {Makrene.Circle} circle      - the circle structure\n *  @param {object} config              - The settings\n *  @param {number} config.width        - The width of the screen\n *  @param {number} config.height       - The height of the screen\n *  @param {number} config.levelOffset  - The space between each level\n *  @param {number} config.vertexWidth  - The width of each vertex box\n *  @param {number} config.vertexHeight - The height of each vertex box\n *  @param {string} config.lineColor    - The color of the lines\n *  @param {string} config.vertexColor  - The color of each vertex box\n *  @param {number} config.lineWidth    - The width of each line\n *  @return {undefined}\n */\nmodule.exports = function (context, circle, config) {\n\n  var offsetX = (config.width  - config.vertexWidth ) / 2;\n  var offsetY = (config.height - config.vertexHeight) / 2;\n\n  config.levelOffset = config.levelOffset || (config.width/2)/circle.numCircleLevels;\n\n  base(context,\n    circle,\n    config,\n    function(v) {\n      return (v.data.level == circle.numCircleLevels) \n      ? edgeOfView(config, v.data.degree).x\n      : offsetX + ((Math.cos(v.data.degree * 0.0174532925) * (v.data.level * config.levelOffset)) + config.vertexWidth  / 2);\n    },\n    function(v) {\n      return (v.data.level == circle.numCircleLevels)\n      ? edgeOfView(config, v.data.degree-180).y\n      : offsetY + ((Math.sin(v.data.degree * 0.0174532925) * (v.data.level * config.levelOffset)) + config.vertexHeight / 2);\n    });\n};\n\n/**\n *  The edgeOfView() method finds the point on the rectangle by degree from the middle point.\n *\n *  -------------X------\n *  |           /      |                Given an 2d rectangle with width and height, find the \n *  |          / 45   |                x and y position, on the border of the rectangle, by an given\n *  |         /________| height         angle from the center of the rectangle.\n *  |                  |\n *  |                  |\n *  --------------------\n *          width\n *\n *  @link https://stackoverflow.com/questions/4061576/finding-points-on-a-rectangle-at-a-given-angle/31886696\n *  @remarks Solution was found as always on stackoverflow :P\n *  \n *  Syntax:\n *  var point = edgeOfView({ height: 100, width: 40 }, 45);\n *  console.log(point.x, point.y);  \n *\n *  @private\n *  @param {object} rect        - the rectangle box, on which to find the point by degree\n *  @param {nubmer} rect.height - the height of the rectangle\n *  @param {nubmer} rect.width  - the width of the rectangle\n *  @param {nubmer} deg         - the degree from the center to find the point\n *  @return {object}            - The point with x, y coordinates.\n */\nfunction edgeOfView (rect, deg) {\n\n  var twoPI = Math.PI*2;\n  var theta = deg * Math.PI / 180;\n  \n  while (theta < -Math.PI) {\n    theta += twoPI;\n  }\n  \n  while (theta > Math.PI) {\n    theta -= twoPI;\n  }\n  \n  var rectAtan = Math.atan2(rect.height, rect.width);\n  var tanTheta = Math.tan(theta);\n  var region;\n  \n  if ((theta > -rectAtan) && (theta <= rectAtan)) {\n      region = 1;\n  } else if ((theta > rectAtan) && (theta <= (Math.PI - rectAtan))) {\n      region = 2;\n  } else if ((theta > (Math.PI - rectAtan)) || (theta <= -(Math.PI - rectAtan))) {\n      region = 3;\n  } else {\n      region = 4;\n  }\n  \n  var edgePoint = {x: rect.width/2, y: rect.height/2};\n  var xFactor = 1;\n  var yFactor = 1;\n  \n  switch (region) {\n    case 1: yFactor = -1; break;\n    case 2: yFactor = -1; break;\n    case 3: xFactor = -1; break;\n    case 4: xFactor = -1; break;\n  }\n  \n  if ((region === 1) || (region === 3)) {\n    edgePoint.x += xFactor * (rect.width / 2.);\n    edgePoint.y += yFactor * (rect.width / 2.) * tanTheta;\n  } else {\n    edgePoint.x += xFactor * (rect.height / (2. * tanTheta));\n    edgePoint.y += yFactor * (rect.height /  2.);\n  }\n  \n  return edgePoint;\n}\n\n},{\"./makrene.visualizer\":10}],9:[function(_dereq_,module,exports){\n/*global require, module */\n\nvar base = _dereq_('./makrene.visualizer');\n\nmodule.exports = function (context, circle, config) {\n\n  base(context,\n    circle,\n    config,\n    function(v) {\n      return config.offset + (((config.vertexWidth + config.margin) * v.data.col) + config.vertexWidth/2);\n    },\n    function(v) {\n      return config.offset + (((config.vertexHeight + config.margin ) * v.data.row) + config.vertexHeight/2);\n    });\n};\n\n},{\"./makrene.visualizer\":10}],10:[function(_dereq_,module,exports){\n/*global module */\n\nmodule.exports = function(context, graph, config, getPosX, getPosY){\n\n  config = Object.assign({\n\n   /**\n    *  The width of the screen\n    *  @type {number}\n    */\n    width: 100,\n\n   /**\n    *  The height of the screen\n    *  @type {number}\n    */\n    height: 100,\n    \n   /**\n    *  The space between each level\n    *  @type {number}\n    */\n    levelOffset: 10,\n    \n   /**\n    *  The width of each vertex box\n    *  @type {number}\n    */\n    vertexWidth: 100,\n    \n   /**\n    *  The height of each vertex box\n    *  @type {number}\n    */\n    vertexHeight: 100,\n    \n   /**\n    *  The color of the lines\n    *  @type {number}\n    */\n    lineColor: 100,\n    \n   /**\n    *  The color of each vertex box\n    *  @type {number}\n    */\n    vertexColor: 100,\n    \n   /**\n    *  The width of each line\n    *  @type {number}\n    */\n    lineWidth: 100,\n\n    /**\n     *  Draw faces\n     *  @type {bool}\n     */\n     drawFaces: true,\n\n    /**\n     *  Draw edges\n     *  @type {bool}\n     */\n     drawEdges: true,\n\n    /**\n     *  Draw vertices\n     *  @type {bool}\n     */\n     drawVertices: true,\n\n    /**\n     *  Draw faces\n     *  @type {bool}\n     */\n     drawFacesDebugText: false,\n\n    /**\n     *  Draw faces\n     *  @type {bool}\n     */\n     drawEdgesDebugText: false,\n\n    /**\n     *  Draw faces\n     *  @type {bool}\n     */\n     drawVertexDebugText: false\n\n  }, config);\n\n  getPosX = getPosX || function (v) {\n    if (v.data.x)\n      return v.data.x;\n    v.data.x = Math.random() * config.width;\n    return v.data.x;\n  }\n\n  getPosY = getPosY || function (v) {\n    if (v.data.y)\n      return v.data.y;\n    v.data.y = Math.random() * config.height;\n    return v.data.y;\n  }\n\n  if (config.drawFaces) {\n    // draw Faces\n    graph.faces.forEach(function(face){\n      context.beginPath();\n      context.fillStyle = 'rgba(0,0,0,0.2)';\n      var vertex = face.vertices[0];\n      context.moveTo(getPosX(vertex), getPosY(vertex));\n      face.vertices.forEach(function(vertex){\n        context.lineTo(getPosX(vertex), getPosY(vertex));\n      })\n      context.fill();\n    })\n  }\n\n  if (config.drawEdges) {\n    // draw Edges\n    graph.edges.forEach(function(edge){\n      context.beginPath();\n      context.lineWidth = config.lineWidth;\n      context.strokeStyle = config.lineColor;\n      var v1 = edge.vertices[0];\n      var v2 = edge.vertices[1];\n      context.moveTo(getPosX(v1), getPosY(v1));\n      context.lineTo(getPosX(v2), getPosY(v2));\n      context.stroke();\n    });\n  }\n\n  if (config.drawVertices) {\n    // draw vertexes\n    graph.forEach(function(v){\n      if (v){\n        context.beginPath();\n        context.fillStyle = config.vertexColor;\n        context.fillRect(\n          getPosX(v) - config.vertexWidth/2,\n          getPosY(v) - config.vertexHeight/2,\n          config.vertexWidth,\n          config.vertexHeight);     \n      }\n    });\n  }\n\n  if (config.drawVertexDebugText) {\n    // Draw text\n    graph.forEach(function(v){\n      if (v){\n        drawText(\n          context, \n          'i' + v.id +\n          'n' + v.neighbours.length + \n          'e' + v.edges.length + \n          'f' + v.faces.length,\n          getPosX(v),\n          getPosY(v),\n          'red');\n      }\n    });\n  }\n\n  if (config.drawEdgesDebugText) {\n    graph.edges.forEach(function(edge){\n      var v1 = edge.vertices[0];\n      var v2 = edge.vertices[1];\n      drawText(\n        context,\n        'i' + edge.id +\n        'n' + edge.neighbours.length + \n        'v' + edge.vertices.length + \n        'f' + edge.faces.length,\n        getPosX(v1) + (getPosX(v2)- getPosX(v1))/2,\n        getPosY(v1) + (getPosY(v2) - getPosY(v1))/2,\n        'blue');\n    });\n  }\n\n  if (config.drawFacesDebugText) {\n    graph.faces.forEach(function(face){\n      var centerX = (getPosX(face.vertices[0]) + getPosX(face.vertices[1]) + getPosX(face.vertices[2])) / 3;\n      var centerY = (getPosY(face.vertices[0]) + getPosY(face.vertices[1]) + getPosY(face.vertices[2])) / 3;\n      \n      drawText(\n        context,\n        'i' + face.id +\n        'n' + face.neighbours.length + \n        'v' + face.vertices.length + \n        'e' + face.edges.length,\n        centerX,\n        centerY,\n        'black')\n    });\n  }\n};\n\nfunction drawText(context, content, x, y, color){\n  var lineHeight=context.measureText('M').width;\n  var width = context.measureText(content).width;\n  var padding = 2;\n  context.fillStyle = 'white';\n  context.fillRect(\n    (x - (width/2)) - padding,  \n    (y - (lineHeight/2)) - padding, \n    width + (padding *2), \n    lineHeight + (padding*2));\n\n  context.strokeStyle = context.fillStyle = color;\n  context.fillText(content, x - (width/2), y + (lineHeight/2));\n}\n},{}],11:[function(_dereq_,module,exports){\n// Polyfils\n\n/**\n *  Object.assign polyfil\n *  @by https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n */\nif (typeof Object.assign != 'function') {\n  (function () {\n    Object.assign = function (target) {\n      'use strict';\n      if (target === undefined || target === null) {\n        throw new TypeError('Cannot convert undefined or null to object');\n      }\n\n      var output = Object(target);\n      for (var index = 1; index < arguments.length; index++) {\n        var source = arguments[index];\n        if (source !== undefined && source !== null) {\n          for (var nextKey in source) {\n            if (source.hasOwnProperty(nextKey)) {\n              output[nextKey] = source[nextKey];\n            }\n          }\n        }\n      }\n      return output;\n    };\n  })();\n}\n\n/**\n *  Array.prototype.includes polyfil\n *  @by https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/includes\n */\nif (!Array.prototype.includes) {\n  Array.prototype.includes = function(searchElement /*, fromIndex*/ ) {\n    'use strict';\n    var O = Object(this);\n    var len = parseInt(O.length) || 0;\n    if (len === 0) {\n      return false;\n    }\n    var n = parseInt(arguments[1]) || 0;\n    var k;\n    if (n >= 0) {\n      k = n;\n    } else {\n      k = len + n;\n      if (k < 0) {k = 0;}\n    }\n    var currentElement;\n    while (k < len) {\n      currentElement = O[k];\n      if (searchElement === currentElement ||\n         (searchElement !== searchElement && currentElement !== currentElement)) { // NaN !== NaN\n        return true;\n      }\n      k++;\n    }\n    return false;\n  };\n}\n\n// My Polyfills\n\nif (!Array.prototype.first) {\n  Array.prototype.first = function(){\n    return this[0];\n  }\n}\n},{}]},{},[2])\n(2)\n});"],"sourceRoot":"/source/"}