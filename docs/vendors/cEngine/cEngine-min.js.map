{"version":3,"sources":["cEngine.js"],"names":["e","t","n","r","s","o","u","a","require","i","Error","f","exports","call","length","1","module","global","cEngine","version","create","config","Engine","stepTimeThen","undefined","stepTimeNow","stepTimeElapsed","isRunning","canvas","context","pluginList","requestAnimationFrameId","init","createDomElement","createPluginList","callPlugins","start","loop","stop","window","cancelAnimationFrame","stepFn","autoClear","clear","width","height","step","_public_","clearRect","Date","getTime","requestAnimationFrame","document","createElement","domElement","appendChild","getContext","style","setStyle","resizeTo","destroy","remove","property","fn","params","forEach","plugin","apply","plugins","hasOwnProperty","cEnginePlugin","push","Object","assign","body","count","extend","id","./vendors/polyfils","2","target","TypeError","output","index","arguments","source","nextKey"],"mappings":"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","file":"cEngine-min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error(\"Cannot find module '\"+o+\"'\")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nrequire('./vendors/polyfils');\n\n/**\n *  Canvas engine with plugin capabilities.\n *  @param {object} global - window or this\n */\n(function (global) {\n\n  /**\n   *  Global namesapce\n   *  @global\n   */\n  var cEngine = {\n\n    /**\n     *  The version.\n     *  @type {string}\n     */\n    version: '0.1.5',\n\n    /**\n     *  Factory for a new cEninge instance.\n     *  @public\n     *  @param {object=} config - config for engine\n     *  @return {object} eEngine instance\n     */\n    create: function create(config) {\n\n      /**\n       *  The cEngine instance.\n       *  @private\n       *  @instance\n       *  @type {object}\n       */\n      var Engine = {\n\n        /**\n         *  Time of last step\n         *  @type {date}\n         */\n        stepTimeThen: undefined,\n\n        /**\n         *  Time of step\n         *  @type {date}\n         */\n        stepTimeNow: undefined,\n\n        /**\n         *  Elapsed time since last step\n         *  @type {number}\n         */\n        stepTimeElapsed: undefined,\n\n        /**\n         *  is engine running\n         *  @type {bool}\n         */\n        isRunning: false,\n\n        /**\n         *  canvas dom element\n         *  @type {HTMLElement}\n         */\n        canvas: undefined,\n\n        /**\n         *  canvas 2d context\n         *  @type {CanvasRenderingContext2D}\n         */\n        context: undefined,\n\n        /**\n         *  shorthand list of all plugins\n         *  @type {array}\n         */\n        pluginList: [],\n\n        /**\n         *  shorthand list of all plugins\n         *  @type {number}\n         */\n        requestAnimationFrameId: undefined,\n\n        /**\n         *  Initialize canvas engine.\n         */\n        init: function init() {\n          Engine.createDomElement();\n          Engine.createPluginList();\n          Engine.callPlugins('init', [Engine]);\n        },\n\n        /**\n         *  Starts the engine by calling the loop.\n         */\n        start: function start() {\n          Engine.isRunning = true;\n          Engine.callPlugins('start');\n          Engine.loop();\n        },\n\n        /**\n         *  Stops the engine.\n         */\n        stop: function stop() {\n          Engine.isRunning = false;\n\n          if (Engine.requestAnimationFrameId) {\n            window.cancelAnimationFrame(Engine.requestAnimationFrameId);\n          }\n\n          Engine.callPlugins('stop');\n        },\n\n        /**\n         *  Hanlder for every loop step.\n         */\n        stepFn: function stepFn() {\n          if (Engine.autoClear) {\n            Engine.clear();\n          }\n\n          Engine.callPlugins('preStep', [Engine.context, Engine.canvas.width, Engine.canvas.height, Engine.stepTimeElapsed]);\n\n          Engine.step.call(_public_, Engine.context, Engine.canvas.width, Engine.canvas.height, Engine.stepTimeElapsed);\n\n          Engine.callPlugins('postStep', [Engine.context, Engine.canvas.width, Engine.canvas.height, Engine.stepTimeElapsed]);\n        },\n\n        /**\n         *  Clears the canvas context.\n         */\n        clear: function clear() {\n          Engine.context.clearRect(0, 0, Engine.canvas.width, Engine.canvas.height);\n        },\n\n        /**\n         *  Engine loop.\n         */\n        loop: function loop() {\n          if (Engine.isRunning) {\n\n            Engine.stepTimeNow = new Date().getTime();\n            Engine.stepTimeElapsed = Engine.stepTimeNow - Engine.stepTimeThen;\n\n            Engine.stepFn();\n\n            Engine.stepTimeThen = Engine.stepTimeNow;\n\n            Engine.requestAnimationFrameId = window.requestAnimationFrame(Engine.loop);\n          }\n        },\n\n        /**\n         *  Initialize Canvas and attach to dom element.\n         */\n        createDomElement: function createDomElement() {\n          Engine.canvas = document.createElement('canvas');\n\n          Engine.domElement.appendChild(Engine.canvas);\n\n          Engine.context = Engine.canvas.getContext('2d');\n\n          if (Engine.style) {\n            Engine.setStyle(Engine.style);\n          }\n\n          Engine.resizeTo(Engine.width || Engine.canvas.width, Engine.height || Engine.canvas.height);\n        },\n\n        /**\n         *  Remove all engine garbage so garbage collection can \n         *  clear all and Dom is clean.\n         */\n        destroy: function destroy() {\n          Engine.callPlugins('destroy');\n          Engine.canvas.remove();\n        },\n\n        /**\n         *  Set Canvas Style.\n         *  @param {object} style - style\n         */\n        setStyle: function setStyle(style) {\n          for (var property in style) {\n            Engine.canvas.style[property] = style[property];\n          }\n        },\n\n        /**\n         *  Resize to width and height.\n         *  @param {number} width - width\n         *  @param {number} height - height\n         */\n        resizeTo: function resizeTo(width, height) {\n          Engine.width = Engine.canvas.width = width;\n          Engine.height = Engine.canvas.height = height;\n        },\n\n        /**\n         *  Call function of all plugins.\n         *  @param {string} fn - function name\n         *  @param {array} params - array of all call arguments\n         */\n        callPlugins: function callPlugins(fn, params) {\n          Engine.pluginList.forEach(function (plugin) {\n            if (plugin[fn]) {\n              plugin[fn].apply(undefined, params);\n            }\n          });\n        },\n\n        /**\n         *  Create shorthand plugin list for faster access.\n         */\n        createPluginList: function createPluginList() {\n          for (var plugin in Engine.plugins) {\n            if (Engine.plugins.hasOwnProperty(plugin) && typeof Engine.plugins[plugin] != 'undefined' && typeof Engine.plugins[plugin].cEnginePlugin != 'undefined') {\n\n              Engine.pluginList.push(Engine.plugins[plugin]);\n            }\n          }\n        }\n      };\n\n      Object.assign(Engine, {\n\n        /**\n         *  parent dom element to attach to\n         *  @type {HTMLElement}\n         */\n        domElement: document.body,\n\n        /**\n         *  should canvas be cleared every step\n         *  @type {bool}\n         */\n        autoClear: false,\n\n        /**\n         *  callback for every step\n         *  @type {function}\n         */\n        step: undefined,\n\n        /**\n         *  canvas width\n         *  @type {number}\n         */\n        width: undefined,\n\n        /**\n         *  canvas height\n         *  @type {number}\n         */\n        height: undefined,\n\n        /**\n         *  canvas style\n         *  @type {object}\n         */\n        style: undefined,\n\n        /**\n         *  object containing all plugins\n         *  @type {object} \n         */\n        plugins: {}\n\n      }, config);\n\n      Engine.init();\n\n      /**\n       *  Public interface for engine\n       *  @public\n       */\n      var _public_ = {\n\n        /**\n         *  All Plugins\n         *  @type {object}\n         */\n        plugins: Engine.plugins,\n\n        /**\n         *  Stop engine.\n         *  @return {object} engine instance\n         */\n        stop: function stop() {\n          Engine.stop();\n          return _public_;\n        },\n\n        /**\n         *  Calls engine step one time or how \n         *  many time count param says.\n         *  @param {number} [count=2] - how many steps\n         *  @return {object} engine instance\n         */\n        step: function step(count) {\n          if (count && count > 1) {\n\n            Engine.stepFn();\n            return _public_.step(--count);\n          } else {\n\n            Engine.stepFn();\n            return _public_;\n          }\n        },\n\n        /**\n         *  Starts engine.\n         *  @return {object} engine instance\n         */\n        start: function start() {\n          Engine.start();\n          return _public_;\n        },\n\n        /**\n         *  Clears Context of engine.\n         *  @return {object} engine instance\n         */\n        clear: function clear() {\n          Engine.clear();\n          return _public_;\n        },\n\n        /**\n         *  Destoys engine.\n         */\n        destroy: function destroy() {\n          Engine.stop();\n          Engine.destroy();\n          Engine = undefined;\n        }\n      };\n\n      return _public_;\n    },\n\n    /**\n     *  Extend cEngine with plugin.\n     *  @param {string} id - id of plugin, \n     *    eg 'filter' -> cEngine.filter\n     *  @param {object} plugin - plugin\n     *  @throws {Error} error\n     */\n    extend: function extend(id, plugin) {\n      if (typeof id === 'undefined' || typeof plugin === 'undefined') {\n\n        throw new Error('id or plugin is undefined!');\n      } else if (id === '') {\n\n        throw new Error('id is empty!');\n      } else if (cEngine[id]) {\n\n        throw new Error('skiped cEngine-plugin [' + id + ']. ' + 'Maybe already attached or uses intern blocked ' + 'name like \"create\", \"extend\" or \"version\"!');\n      } else if (typeof plugin.create === 'undefined') {\n\n        throw new Error('plugin has no create function!');\n      } else {\n        cEngine[id] = plugin;\n      }\n    }\n  };\n\n  global.cEngine = cEngine;\n})(typeof window !== 'undefined' ? window : undefined);\n},{\"./vendors/polyfils\":2}],2:[function(require,module,exports){\n// Polyfils\n\n/**\n *  Object.assign polyfil\n *  @by https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n */\nif (typeof Object.assign != 'function') {\n  (function () {\n    Object.assign = function (target) {\n      'use strict';\n      if (target === undefined || target === null) {\n        throw new TypeError('Cannot convert undefined or null to object');\n      }\n\n      var output = Object(target);\n      for (var index = 1; index < arguments.length; index++) {\n        var source = arguments[index];\n        if (source !== undefined && source !== null) {\n          for (var nextKey in source) {\n            if (source.hasOwnProperty(nextKey)) {\n              output[nextKey] = source[nextKey];\n            }\n          }\n        }\n      }\n      return output;\n    };\n  })();\n}\n},{}]},{},[1])"],"sourceRoot":"/source/"}