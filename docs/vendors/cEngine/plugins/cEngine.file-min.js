!function e(t,n,o){function i(a,f){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!f&&u)return u(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+a+"'")}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return i(n?n:e)},c,c.exports,e,t,n,o)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var i=e("../vendors/FileSaver"),r=o(i);e("../vendors/canvas-toBlob"),function(e){e.extend("file",{create:function(){var e={cEnginePlugin:{name:"file",version:"0.0.1"},engine:void 0,fileInput:void 0,init:function(t){e.engine=t,e.fileInput=document.createElement("input"),e.fileInput.type="file",e.fileInput.style.visibility="hidden",e.fileInput.onchange=function(){var t=new FileReader;t.onload=function(){var n=new Image;n.onload=function(){e.engine.clear(),e.engine.resizeTo(n.width,n.height),e.engine.canvas.getContext("2d").drawImage(n,0,0)},n.src=t.result},t.readAsDataURL(e.fileInput.files[0])},document.body.appendChild(e.fileInput)},destroy:function(){e.fileInput.remove()},saveToFile:function(t){e.engine.canvas.toBlob(function(e){r["default"].saveAs(e,t)})},loadFile:function(){e.fileInput.click()}};return e}})}(cEngine)},{"../vendors/FileSaver":2,"../vendors/canvas-toBlob":3}],2:[function(e,t,n){var o=o||function(e){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var t=e.document,n=function(){return e.URL||e.webkitURL||e},o=t.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in o,r=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},a=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),f=e.webkitRequestFileSystem,u=e.requestFileSystem||f||e.mozRequestFileSystem,c=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},s="application/octet-stream",l=0,d=500,v=function(t){var o=function(){"string"==typeof t?n().revokeObjectURL(t):t.remove()};e.chrome?o():setTimeout(o,d)},p=function(e,t,n){t=[].concat(t);for(var o=t.length;o--;){var i=e["on"+t[o]];if("function"==typeof i)try{i.call(e,n||e)}catch(r){c(r)}}},w=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e},y=function(t,c,d){d||(t=w(t));var y,g,h,m=this,b=t.type,R=!1,I=function(){p(m,"writestart progress write writeend".split(" "))},S=function(){if(g&&a&&"undefined"!=typeof FileReader){var o=new FileReader;return o.onloadend=function(){var e=o.result;g.location.href="data:attachment/file"+e.slice(e.search(/[,;]/)),m.readyState=m.DONE,I()},o.readAsDataURL(t),void(m.readyState=m.INIT)}if(!R&&y||(y=n().createObjectURL(t)),g)g.location.href=y;else{var i=e.open(y,"_blank");void 0===i&&a&&(e.location.href=y)}m.readyState=m.DONE,I(),v(y)},E=function(e){return function(){if(m.readyState!==m.DONE)return e.apply(this,arguments)}},D={create:!0,exclusive:!1};return m.readyState=m.INIT,c||(c="download"),i?(y=n().createObjectURL(t),void setTimeout(function(){o.href=y,o.download=c,r(o),I(),v(y),m.readyState=m.DONE})):(e.chrome&&b&&b!==s&&(h=t.slice||t.webkitSlice,t=h.call(t,0,t.size,s),R=!0),f&&"download"!==c&&(c+=".download"),(b===s||f)&&(g=e),u?(l+=t.size,void u(e.TEMPORARY,l,E(function(e){e.root.getDirectory("saved",D,E(function(e){var n=function(){e.getFile(c,D,E(function(e){e.createWriter(E(function(n){n.onwriteend=function(t){g.location.href=e.toURL(),m.readyState=m.DONE,p(m,"writeend",t),v(e)},n.onerror=function(){var e=n.error;e.code!==e.ABORT_ERR&&S()},"writestart progress write abort".split(" ").forEach(function(e){n["on"+e]=m["on"+e]}),n.write(t),m.abort=function(){n.abort(),m.readyState=m.DONE},m.readyState=m.WRITING}),S)}),S)};e.getFile(c,{create:!1},E(function(e){e.remove(),n()}),E(function(e){e.code===e.NOT_FOUND_ERR?n():S()}))}),S)}),S)):void S())},g=y.prototype,h=function(e,t,n){return new y(e,t,n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return n||(e=w(e)),navigator.msSaveOrOpenBlob(e,t||"download")}:(g.abort=function(){var e=this;e.readyState=e.DONE,p(e,"abort")},g.readyState=g.INIT=0,g.WRITING=1,g.DONE=2,g.error=g.onwritestart=g.onprogress=g.onwrite=g.onabort=g.onerror=g.onwriteend=null,h)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof t&&t.exports?t.exports.saveAs=o:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define([],function(){return o})},{}],3:[function(e,t,n){!function(e){"use strict";var t,n=e.Uint8Array,o=e.HTMLCanvasElement,i=o&&o.prototype,r=/\s*;\s*base64\s*(?:;|$)/i,a="toDataURL",f=function(e){for(var o,i,r,a=e.length,f=new n(a/4*3|0),u=0,c=0,s=[0,0],l=0,d=0;a--;)i=e.charCodeAt(u++),o=t[i-43],255!==o&&o!==r&&(s[1]=s[0],s[0]=i,d=d<<6|o,l++,4===l&&(f[c++]=d>>>16,61!==s[1]&&(f[c++]=d>>>8),61!==s[0]&&(f[c++]=d),l=0));return f};n&&(t=new n([62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51])),o&&!i.toBlob&&(i.toBlob=function(e,t){if(t||(t="image/png"),this.mozGetAsFile)return void e(this.mozGetAsFile("canvas",t));if(this.msToBlob&&/^\s*image\/png\s*(?:$|;)/i.test(t))return void e(this.msToBlob());var o,i=Array.prototype.slice.call(arguments,1),u=this[a].apply(this,i),c=u.indexOf(","),s=u.substring(c+1),l=r.test(u.substring(0,c));Blob.fake?(o=new Blob,l?o.encoding="base64":o.encoding="URI",o.data=s,o.size=s.length):n&&(o=l?new Blob([f(s)],{type:t}):new Blob([decodeURIComponent(s)],{type:t})),e(o)},i.toDataURLHD?i.toBlobHD=function(){a="toDataURLHD";var e=this.toBlob();return a="toDataURL",e}:i.toBlobHD=i.toBlob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this)},{}]},{},[1]);
//# sourceMappingURL=cEngine.file-min.js.map
