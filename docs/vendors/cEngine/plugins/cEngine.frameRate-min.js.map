{"version":3,"sources":["cEngine.frameRate.js"],"names":["e","t","n","r","s","o","u","a","require","i","Error","f","exports","call","length","1","module","cEngine","extend","create","config","frameRate","cEnginePlugin","name","version","fps","fpsInterval","undefined","currentFrame","init","engine","setFps","loop","start","stepTimeNow","Date","now","stepTimeThen","value","postStep","isRunning","getTime","stepTimeElapsed","stepFn","requestAnimationFrame"],"mappings":"CAAA,QAAUA,GAAEC,EAAEC,EAAEC,GAAG,QAASC,GAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,GAAIE,GAAkB,kBAATC,UAAqBA,OAAQ,KAAIF,GAAGC,EAAE,MAAOA,GAAEF,GAAE,EAAI,IAAGI,EAAE,MAAOA,GAAEJ,GAAE,EAAI,MAAM,IAAIK,OAAM,uBAAuBL,EAAE,KAAK,GAAIM,GAAET,EAAEG,IAAIO,WAAYX,GAAEI,GAAG,GAAGQ,KAAKF,EAAEC,QAAQ,SAASZ,GAAG,GAAIE,GAAED,EAAEI,GAAG,GAAGL,EAAG,OAAOI,GAAEF,EAAEA,EAAEF,IAAIW,EAAEA,EAAEC,QAAQZ,EAAEC,EAAEC,EAAEC,GAAG,MAAOD,GAAEG,GAAGO,QAAkD,IAAI,GAA1CH,GAAkB,kBAATD,UAAqBA,QAAgBH,EAAE,EAAEA,EAAEF,EAAEW,OAAOT,IAAID,EAAED,EAAEE,GAAI,OAAOD,KAAKW,GAAG,SAASP,EAAQQ,EAAOJ,GACrb,cAIA,SAAWK,GAETA,EAAQC,OAAO,aAEbC,OAAQ,SAAgBC,GACtBA,EAASA,KAET,IAAIC,IAEFC,eACEC,KAAM,YACNC,QAAS,SAGXC,IAAKL,EAAOK,KAAO,GAMnBC,YAAaC,OAMbC,aAAc,EAEdC,KAAM,SAAcC,GAClBT,EAAUU,OAAOV,EAAUI,KAC3BJ,EAAUS,OAASA,EACnBT,EAAUS,OAAOE,KAAOX,EAAUW,MAGpCC,MAAO,WACLZ,EAAUS,OAAOI,YAAcC,KAAKC,MACpCf,EAAUS,OAAOO,aAAehB,EAAUS,OAAOI,aAEnDH,OAAQ,SAAgBO,GACtBjB,EAAUI,IAAMa,EAChBjB,EAAUK,YAAc,IAAOL,EAAUI,KAE3Cc,SAAU,WACRlB,EAAUO,gBAEZI,KAAM,WAEAX,EAAUS,OAAOU,YAEnBnB,EAAUS,OAAOI,aAAc,GAAIC,OAAOM,UAE1CpB,EAAUS,OAAOY,gBAAkBrB,EAAUS,OAAOI,YAAcb,EAAUS,OAAOO,aAE/EhB,EAAUS,OAAOY,gBAAkBrB,EAAUK,cAC/CL,EAAUS,OAAOa,SACjBtB,EAAUS,OAAOO,aAAehB,EAAUS,OAAOI,YAAcb,EAAUS,OAAOY,gBAAkBrB,EAAUK,aAG9GkB,sBAAsBvB,EAAUW,QAKtC,OAAOX,OAGVJ,mBACQ","file":"cEngine.frameRate-min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error(\"Cannot find module '\"+o+\"'\")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\n/*global cEngine */\n\n(function (cEngine) {\n\n  cEngine.extend('frameRate', {\n\n    create: function create(config) {\n      config = config || {};\n\n      var frameRate = {\n\n        cEnginePlugin: {\n          name: 'frameRate',\n          version: '0.0.1'\n        },\n\n        fps: config.fps || 60,\n\n        /**\n         *  Fps in ms\n         *  @type {number}\n         */\n        fpsInterval: undefined,\n\n        /**\n         *  The current Frame number\n         *  @type {number}\n         */\n        currentFrame: 0,\n\n        init: function init(engine) {\n          frameRate.setFps(frameRate.fps);\n          frameRate.engine = engine;\n          frameRate.engine.loop = frameRate.loop;\n        },\n\n        start: function start() {\n          frameRate.engine.stepTimeNow = Date.now();\n          frameRate.engine.stepTimeThen = frameRate.engine.stepTimeNow;\n        },\n        setFps: function setFps(value) {\n          frameRate.fps = value;\n          frameRate.fpsInterval = 1000 / frameRate.fps;\n        },\n        postStep: function postStep() {\n          frameRate.currentFrame++;\n        },\n        loop: function loop() {\n\n          if (frameRate.engine.isRunning) {\n\n            frameRate.engine.stepTimeNow = new Date().getTime();\n\n            frameRate.engine.stepTimeElapsed = frameRate.engine.stepTimeNow - frameRate.engine.stepTimeThen;\n\n            if (frameRate.engine.stepTimeElapsed > frameRate.fpsInterval) {\n              frameRate.engine.stepFn();\n              frameRate.engine.stepTimeThen = frameRate.engine.stepTimeNow - frameRate.engine.stepTimeElapsed % frameRate.fpsInterval;\n            }\n\n            requestAnimationFrame(frameRate.loop);\n          }\n        }\n      };\n\n      return frameRate;\n    }\n  });\n})(cEngine);\n},{}]},{},[1])"],"sourceRoot":"/source/"}